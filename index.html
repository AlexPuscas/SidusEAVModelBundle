<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Sidus/EAVModelBundle</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css"
          integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link rel="stylesheet" href="https://vincentchalnot.github.io/SidusEAVModelBundle/css/main.css">
</head>
<body>

<div class="position-relative p-md-3 text-center bg-dark border-bottom mb-4 dark-background"
     style="">
    <div class="my-5">
        <a href="https://vincentchalnot.github.io/SidusEAVModelBundle" class="btn">
            <h1 class="display-4 text-white">
                Sidus/EAVModelBundle&nbsp;<i
                        class="fa fa-database"></i>
            </h1>
        </a>
        <p class="lead font-weight-normal text-white">
            Blazing fast data modeling with Symfony
        </p>
                    <a class="btn btn-dark" href="https://github.com/VincentChalnot/SidusEAVModelBundle" target="_blank">
                View on GitHub <i class="fa fa-code-branch"></i>
            </a>
            </div>
</div>

    <a href="https://github.com/VincentChalnot/SidusEAVModelBundle">
        <img class="fixed-top" style="left:auto"
             src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
             alt="Fork me on GitHub">
    </a>

<main class="container">
    <div class="row">
                    <div class="col-sm-3 pr-4">
                <nav role="navigation">
                                                                    <p class="text-muted">
                            Home
                        </p>

                        <ul class="nav nav-pills flex-column">
                                                            <li class="nav-item">
                                    <a class="nav-link active"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/index.html">
                                        Introduction
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/index.html#example">
                                        Example
                                    </a>
                                </li>
                                                    </ul>
                                                                        <hr>
                                                <p class="text-muted">
                            Main documentation
                        </p>

                        <ul class="nav nav-pills flex-column">
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/01-install.html">
                                        01 - Installation
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/02-model.html">
                                        02 - Model configuration
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/03-multiple.html">
                                        03 - Multiple attributes & collections
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/04-entities.html">
                                        04 - Handling Entities
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/05.1-form.html">
                                        05 - Forms
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/06-validate.html">
                                        06 - Validation
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/07.1-query.html">
                                        07 - Query
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/08-translate.html">
                                        08 - Translating the model
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/09-context.html">
                                        19 - EAV Contextualisation
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/10-serialize.html">
                                        10 - Serialization
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/11-extend.html">
                                        11 - Extending & customizing the model
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/12-custom_classes.html">
                                        12 - Custom classes
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/13-extensions.html">
                                        13 - Extensions
                                    </a>
                                </li>
                                                    </ul>
                                                                        <hr>
                                                <p class="text-muted">
                            Other documentation entries
                        </p>

                        <ul class="nav nav-pills flex-column">
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/100-ide_autocomplete.html">
                                        IDE Autocomplete
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/200-questions.html">
                                        Questions & Answers
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/300-performances.html">
                                        Performances
                                    </a>
                                </li>
                                                    </ul>
                    
                </nav>
            </div>

                <section class="col-sm-9">
            <h1 id="siduseavmodelbundle-documentation">Sidus/EAVModelBundle Documentation</h1>
<p><a href="https://insight.sensiolabs.com/projects/621ec123-268d-4a6b-a1d0-03a1e4e84b48"><img src="https://insight.sensiolabs.com/projects/621ec123-268d-4a6b-a1d0-03a1e4e84b48/big.png" alt="SensioLabsInsight" /></a></p>
<p>The canonical version of this documentation can be found here:
<a href="https://vincentchalnot.github.io/SidusEAVModelBundle">https://vincentchalnot.github.io/SidusEAVModelBundle</a></p>
<h2 id="introduction">Introduction</h2>
<p>This bundle allows you to quickly set up a dynamic model in a Symfony project using Doctrine.<br />
Model configuration is done in Yaml and everything can be easily extended.</p>
<p><strong>Main Features:</strong></p>
<ul>
<li><a href="Documentation/02-model.html">The model</a> is defined in <a href="#example">Yaml configuration files</a>, it's easy, it's powerful
and it's versionned.</li>
<li><a href="Documentation/05.1-form.html">Dynamic forms:</a> no more time spent writting form types</li>
<li><a href="Documentation/09-context.html">Data contextualisation</a> with custom context axis (language, region, channel, version...)</li>
<li>Compatible with many native Symfony components:
<a href="Documentation/05.1-form.html">Form</a>,
<a href="Documentation/06-validate.html">Validator</a>,
<a href="Documentation/08-translate.html">Translator</a>,
<a href="Documentation/10-serialize.html">Serializer</a>...</li>
</ul>
<h3 id="documentation-index">Documentation index</h3>
<ul>
<li><a href="Documentation/01-install.html">01 - Installation</a></li>
<li><a href="Documentation/02-model.html">02 - Model configuration</a></li>
<li><a href="Documentation/03-multiple.html">03 - Multiple attributes &amp; collections</a></li>
<li><a href="Documentation/04-entities.html">04 - Handling Entities</a></li>
<li><a href="Documentation/05.1-form.html">05 - Forms</a></li>
<li><a href="Documentation/06-validate.html">06 - Validation</a></li>
<li><a href="Documentation/07.1-query.html">07 - Query</a></li>
<li><a href="Documentation/08-translate.html">08 - Translating the model</a></li>
<li><a href="Documentation/09-context.html">19 - EAV Contextualisation</a></li>
<li><a href="Documentation/10-serialize.html">10 - Serialization</a></li>
<li><a href="Documentation/11-extend.html">11 - Extending &amp; customizing the model</a></li>
<li><a href="Documentation/12-custom_classes.html">12 - Custom classes</a></li>
<li><a href="Documentation/13-extensions.html">13 - Extensions</a></li>
</ul>
<h3 id="other-documentation-entries">Other documentation entries</h3>
<ul>
<li><a href="Documentation/100-ide_autocomplete.html">IDE Autocomplete</a></li>
<li><a href="Documentation/200-questions.html">Questions &amp; Answers</a></li>
<li><a href="Documentation/300-performances.html">Performances</a></li>
</ul>
<h3 id="looking-for-something-">Looking for something ?</h3>
<p>Check the  <a href="Documentation/200-questions.html">Q&amp;A section</a> and don't hesitate to ask questions in the issues.</p>
<h3 id="whats-an-eav-model">What’s an EAV model</h3>
<p>EAV stands for Entity-Attribute-Value</p>
<p>The main feature consists in storing values in a different table than the entities.
Check the confusing and not-so-accurate
<a href="https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model">Wikipedia article</a></p>
<p>This implementation is actually more an E(A)V model than a traditional EAV model because attributes are not stored in
the database but in YAML files.</p>
<p>If you're not familiar with the key concepts of the EAV model, please read the following.</p>
<h3 id="why-using-it">Why using it</h3>
<ul>
<li>Allowing ultra-fast model design because it's super easy to bootstrap.</li>
<li>Grouping in the same place the model and the metadata like: form configuration, validation, serialization options...</li>
<li>Managing single-value attributes and multiple-values attributes the same way and being able to change your mind after
without having to do data recovery.</li>
<li>Storing contextual values per: locale, country, channel (web/print/mobile), versions.</li>
<li>Grouping and ordering attributes.</li>
<li>Easy CRUD: your forms are already configured !</li>
</ul>
<h3 id="why-not-using-it-">Why not using it ?</h3>
<p>Performances ? Not a real issue because MySQL is not usable for searching in a vast amount of data anyway, be it an EAV
model or a more standard relational model. Solution: Elastic Search: it’s currently optionally supported through the
<a href="https://github.com/VincentChalnot/SidusFilterBundle">Sidus/FilterBundle</a> with the
<a href="https://github.com/VincentChalnot/SidusElasticaFilterBundle">Sidus/ElasticaFilterBundle</a></p>
<h4 id="relational-model">Relational model</h4>
<p>If you a have a complex relational model and you plan to use a lots of joins to retrieve data, it might be best to keep
your relational model outside of the EAV model but both can coexists without any problem. However, there is a technical
limitation when using this implementation of the EAV model: There is only one table for the Data entry and one table for
the Values.</p>
<h3 id="the-implementation">The implementation</h3>
<p>We are using Doctrine as it’s the most widely supported ORM by the Symfony community and we’re aiming at a MySQL/MariaDB
implementation only for data storage.</p>
<p>In any EAV model there are two sides</p>
<ul>
<li>The model itself: Families (data types), Attributes and Attribute Types.</li>
<li>The data: The values and the class that contains the values, called here “Data”.</li>
</ul>
<p>In some implementation the model is stored in the database but here we chose to maintain the model in Symfony service
configuration for several reasons:</p>
<ul>
<li>For performance reasons, you always needs to access a lots of components from your model and lazy loading will
generate many unnecessary SQL requests. Symfony services are lazy loaded from PHP cache system which is very very
fast compared to any other storage system.</li>
<li>For complexity reason: with services, you can always define new services, use injections, extend existing services
and have complex behaviors for your entities.</li>
<li>A Symfony configuration is easy to write and to maintain and can be versioned, when your model is stored in your
database along with your data you will have a very hard time to maintain the same model on your different environments.</li>
<li>Because the final users <em>NEVER</em> edits the model directly in production, it’s always some expert or some developer
that does it on a testing environment first and we prefer simple yaml configuration files over a complex administration
system that can fail.</li>
<li>It allows you to add layers of configuration for your special needs, for example you can configure directly some form
options in the attribute declaration.</li>
<li>Finally, you can split your configuration and organise it in different files if needed be and you can comment it,
which is a powerful feature when your model starts to grow bigger and bigger with hundreds of different attributes.</li>
</ul>
<p>Families and attributes are services automatically generated from your configuration, attribute types are standard
Symfony services.</p>
<h3 id="example">Example</h3>
<p>For a basic blog the configuration will look like this:</p>
<pre><code class="language-yaml">sidus_eav_model:
    families:
        Post:
            attributeAsLabel: title
            attributes:
                title: # Default type is string
                    required: true

                content:
                    type: html # This type is available through the EAVBootstrapBundle

                publicationDate:
                    type: datetime

                publicationStatus:
                    type: choice
                    form_options: # Symfony form options are passed directly
                        choices:
                            draft: Draft
                            published: Published
                            archived: Archived

                author:
                    type: data_selector # This type allows to select an other entity inside the EAV model
                    options:
                        autoload: true # Autoload author when loading Post
                        allowed_families:
                            - Author

                tags:
                    multiple: true
                    form_options:
                        collection_options:
                            sortable: true

                isFeatured:
                    type: boolean

        Author:
            attributeAsLabel: name
            attributes:
                name:
                    required: true

                email:
                    validation_rules: # Validation rules can be applied directly in the model
                        - Email: ~</code></pre>
<p>Note that by convention we declare the families in UpperCamelCase and the attributes as lowerCamelCase and we encourage
you to do so.</p>
        </section>
    </div>
</main>

<footer class="container-fluid mt-4">
    <div class="row">
        <div class="col-12 text-center border-top pt-4 pb-4">
            <span>
                                    Copyright <a href="https://twitter.com/VincentChalnot" target="_blank">@VincentChalnot</a> 2015-2018 with special thanks to <a href="https://www.clever-age.com/" target="_blank">Clever-Age</a>
                            </span>
        </div>
    </div>
</footer>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>

<script>
    hljs.initHighlighting();
</script>
</body>
</html>
