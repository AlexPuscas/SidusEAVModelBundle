<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Sidus/EAVModelBundle</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css"
          integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link rel="stylesheet" href="https://vincentchalnot.github.io/SidusEAVModelBundle/css/main.css">
</head>
<body>

<div class="position-relative p-md-3 text-center bg-dark border-bottom mb-4 dark-background"
     style="">
    <div class="my-5">
        <a href="https://vincentchalnot.github.io/SidusEAVModelBundle" class="btn">
            <h1 class="display-4 text-white">
                Sidus/EAVModelBundle&nbsp;<i
                        class="fa fa-database"></i>
            </h1>
        </a>
        <p class="lead font-weight-normal text-white">
            Blazing fast data modeling with Symfony
        </p>
                    <a class="btn btn-dark" href="https://github.com/VincentChalnot/SidusEAVModelBundle" target="_blank">
                View on GitHub <i class="fa fa-code-branch"></i>
            </a>
            </div>
</div>

    <a href="https://github.com/VincentChalnot/SidusEAVModelBundle">
        <img class="fixed-top" style="left:auto"
             src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
             alt="Fork me on GitHub"
             data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
    </a>

<main class="container">
    <div class="row">
                    <div class="col-sm-3 pr-4">
                <nav role="navigation">
                                                                    <p class="text-muted">
                            Home
                        </p>

                        <ul class="nav nav-pills flex-column">
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/index.html">
                                        Introduction
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/index.html#example">
                                        Example
                                    </a>
                                </li>
                                                    </ul>
                                                                        <hr>
                                                <p class="text-muted">
                            Main documentation
                        </p>

                        <ul class="nav nav-pills flex-column">
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/01-install.html">
                                        01 - Installation
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/02-model.html">
                                        02 - Model configuration
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/03-multiple.html">
                                        03 - Multiple attributes & collections
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link active"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/04-entities.html">
                                        04 - Handling Entities
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/05.1-form.html">
                                        05 - Forms
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/06-validate.html">
                                        06 - Validation
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/07.1-query.html">
                                        07 - Query
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/08-translate.html">
                                        08 - Translating the model
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/09-context.html">
                                        19 - EAV Contextualisation
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/10-serialize.html">
                                        10 - Serialization
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/11-extend.html">
                                        11 - Extending & customizing the model
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/12-custom_classes.html">
                                        12 - Custom classes
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/13-extensions.html">
                                        13 - Extensions
                                    </a>
                                </li>
                                                    </ul>
                                                                        <hr>
                                                <p class="text-muted">
                            Other documentation entries
                        </p>

                        <ul class="nav nav-pills flex-column">
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/100-ide_autocomplete.html">
                                        IDE Autocomplete
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/200-questions.html">
                                        Questions & Answers
                                    </a>
                                </li>
                                                            <li class="nav-item">
                                    <a class="nav-link"
                                       href="https://vincentchalnot.github.io/SidusEAVModelBundle/Documentation/300-performances.html">
                                        Performances
                                    </a>
                                </li>
                                                    </ul>
                    
                </nav>
            </div>

                <section class="col-sm-9">
            <h2 id="creating-entities">Creating entities</h2>
<p>To create a new entity you must first fetch the family you want from configuration.</p>
<pre><code class="language-php">&lt;?php
/** @var \Sidus\EAVModelBundle\Registry\FamilyRegistry $familyRegistry */
$familyRegistry = $container-&gt;get('sidus_eav_model.family.registry');
$postFamily = $familyRegistry-&gt;getFamily('Post');

$newPost = $postFamily-&gt;createData();</code></pre>
<h3 id="editing-an-entity-and-accessing-its-values">Editing an entity and accessing its values</h3>
<p>You can simply set or get values of an entity manually in PHP like this:</p>
<pre><code class="language-php">&lt;?php
$newPost-&gt;setTitle('I LOVE SYMFONY');
echo $newPost-&gt;getTitle();</code></pre>
<p>Yes, this relies on magic methods to work but magic methods are not evil (while code generation definitely is). You can
read sometimes that they are bad in terms of performances but this is less and less true with recent versions of PHP.
The only drawback of using them is the lack of annotations that makes them appearing as errors in your IDE which is not
cool. There is no simple solution for this but we might explore the benefits of automatically generating annotations in
Symfony's cache to allow you to identify them with @var.</p>
<p>UPDATE : You can now generate automatically fake classes from your EAV Model by adding this configuration in
config_dev.yml:</p>
<pre><code class="language-yml">imports:
    - { resource: '@SidusEAVModelBundle/Resources/config/annotation_generator.yml' }</code></pre>
<p>It is VERY important to never actually use the generated classes apart from annotations because they wont work.
All classes will be in the namespace \Sidus\EAV and will be named after your families.
Now you can do this and get autocomplete working in your IDE:</p>
<pre><code class="language-php">&lt;?php
/** @var \Sidus\EAV\Post $newPost */
$newPost-&gt;setTitle('I LOVE SYMFONY');
echo $newPost-&gt;getTitle();</code></pre>
<p>Or you can also use the alternative syntax:</p>
<pre><code class="language-php">&lt;?php
/** @var \Sidus\EAVModelBundle\Entity\DataInterface $newPost */
$newPost-&gt;set('title', 'I LOVE SYMFONY');
echo $newPost-&gt;get('title');</code></pre>
<p>Which is exactly what the magic method will do in the background.</p>
<p>We do not implements the magic getters and setters for properties (__get, __set) because they do not allow you to
easily override the business logic in a child class.</p>
<p>Note: In order for the forms to be able to PropertyAccessor (used in forms) to read from magic calls, we enable the
&quot;enableMagicCall&quot; option globally.</p>
<h4 id="persisting-or-deleting-an-entity">Persisting or deleting an entity</h4>
<p>To persist or delete an entity, you can't flush just the Data entity but you need to do a global flush because values
are stored separately from the entity.</p>
<pre><code class="language-php">&lt;?php
/** @var \Doctrine\Bundle\DoctrineBundle\Registry $doctrine */
$em = $doctrine-&gt;getManager();

/** @var \Sidus\EAVModelBundle\Entity\DataInterface $data */
$em-&gt;persist($data);
$em-&gt;flush();</code></pre>
        </section>
    </div>
</main>

<footer class="container-fluid">
    <div class="row">
        <div class="col-12 text-center border-top pt-4 pb-4">
            <span>
                                    Copyright <a href="https://twitter.com/VincentChalnot" target="_blank">@VincentChalnot</a> 2015-2018 with special thanks to <a href="https://www.clever-age.com/" target="_blank">Clever-Age</a>
                            </span>
        </div>
    </div>
</footer>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script>
    hljs.initHighlighting();
</script>
</body>
</html>
